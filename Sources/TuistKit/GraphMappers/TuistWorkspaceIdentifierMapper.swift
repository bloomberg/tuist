import Foundation
import TuistCore
import TuistSupport

final class TuistWorkspaceIdentifierMapper: WorkspaceMapping {
    func map(workspace: WorkspaceWithProjects) throws -> (WorkspaceWithProjects, [SideEffectDescriptor]) {
        /// Used to disambiguate which workspaces are generated by tuist and which are not
        let tuistGeneratedFileDescriptor = FileDescriptor(
            path: workspace
                .workspace
                .path
                .appending(
                    components: "\(workspace.workspace.name).xcworkspace", Constants.tuistGeneratedFileName
                )
        )

        return (workspace, [
            .file(tuistGeneratedFileDescriptor),
        ])
    }
}
